<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Jenkins Tips | aikazuyendo&#39;s memo</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" type="images/png" href="/mywiki/images/favicon.png">
    <meta name="description" content="個人的に気になったことを調査したりやってみた結果をメモしています">
    <link rel="preload" href="/mywiki/assets/css/0.styles.ca14fcdb.css" as="style"><link rel="preload" href="/mywiki/assets/js/app.352ddc3a.js" as="script"><link rel="preload" href="/mywiki/assets/js/2.812fbf60.js" as="script"><link rel="preload" href="/mywiki/assets/js/4.d918e250.js" as="script"><link rel="prefetch" href="/mywiki/assets/js/3.2c5ff14b.js"><link rel="prefetch" href="/mywiki/assets/js/5.1a3adc29.js"><link rel="prefetch" href="/mywiki/assets/js/6.20ecf334.js"><link rel="prefetch" href="/mywiki/assets/js/7.5065deaf.js"><link rel="prefetch" href="/mywiki/assets/js/8.56cb81ab.js"><link rel="prefetch" href="/mywiki/assets/js/9.d620abcc.js">
    <link rel="stylesheet" href="/mywiki/assets/css/0.styles.ca14fcdb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mywiki/" class="home-link router-link-active"><!----> <span class="site-name">aikazuyendo's memo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mywiki/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/mywiki/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="https://github.com/yoshikazuendo/mywiki" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mywiki/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/mywiki/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="https://github.com/yoshikazuendo/mywiki" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/mywiki/" aria-current="page" class="sidebar-link">Top Page</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>jenkins</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mywiki/jenkins/jenkinstips.html" aria-current="page" class="active sidebar-link">Jenkins Tips</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mywiki/jenkins/jenkinstips.html#ジョブ内でビルドパラメーターを利用する" class="sidebar-link">ジョブ内でビルドパラメーターを利用する</a></li><li class="sidebar-sub-header"><a href="/mywiki/jenkins/jenkinstips.html#コンソールログを元にジョブの成功-失敗を判定する-log-parser" class="sidebar-link">コンソールログを元にジョブの成功/失敗を判定する[Log Parser]</a></li><li class="sidebar-sub-header"><a href="/mywiki/jenkins/jenkinstips.html#ユーザー-ジョブごとに権限を設定する-role-based-authorization-strategy" class="sidebar-link">ユーザー/ジョブごとに権限を設定する[Role-based Authorization Strategy]</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>music</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mywiki/music/2019-11-29-01.html" class="sidebar-link">iPhoneで録画/録音したBGMをiPhoneやスマートウォッチで再生したい</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>wiki</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mywiki/wiki/mywiki.html" class="sidebar-link">2020年に向けて自分用ドキュメントツールを見直してみた</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>wsl</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mywiki/wsl/usewsltwo.html" class="sidebar-link">WSL 1 をWSL 2 にアップデートしてdocker-composeを使ってGrowiを立ててみた（おまけつき）</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jenkins-tips-jenkins"><a href="#jenkins-tips-jenkins" class="header-anchor">#</a> Jenkins Tips[Jenkins]</h1> <p>JenkinsのTipsをメモしていきます。</p> <p></p><div class="table-of-contents"><ul><li><a href="#ジョブ内でビルドパラメーターを利用する">ジョブ内でビルドパラメーターを利用する</a></li><li><a href="#コンソールログを元にジョブの成功-失敗を判定する-log-parser">コンソールログを元にジョブの成功/失敗を判定する[Log Parser]</a><ul><li><a href="#使い方">使い方</a></li></ul></li><li><a href="#ユーザー-ジョブごとに権限を設定する-role-based-authorization-strategy">ユーザー/ジョブごとに権限を設定する[Role-based Authorization Strategy]</a><ul><li><a href="#使い方">使い方</a></li><li><a href="#参考サイト">参考サイト</a></li></ul></li></ul></div><p></p> <h2 id="ジョブ内でビルドパラメーターを利用する"><a href="#ジョブ内でビルドパラメーターを利用する" class="header-anchor">#</a> ジョブ内でビルドパラメーターを利用する</h2> <p>下図のような、ジョブ実行時にテキストベースで指定したパラメーターを使用する方法。</p> <p><img src="/mywiki/assets/img/20200829173922.213a620d.png" alt=""></p> <p>ジョブの設定画面で、「ビルドのパラメータ化」の名前を設定する。</p> <p><img src="/mywiki/assets/img/20200829174144.e7a5779b.png" alt=""></p> <p>ビルド設定にて、<code>$ビルドパラメータの名前</code>で設定すると利用することができる。</p> <p>※シェルの実行の場合だけかも。他のビルド手順は未確認。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token variable">$logcontent</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/mywiki/assets/img/20200829174501.ce1628a7.png" alt=""></p> <p>ジョブを実行すると、指定したパラメータが利用できていることが分かる。</p> <p><img src="/mywiki/assets/img/20200829175211.48022d1f.png" alt=""></p> <h2 id="コンソールログを元にジョブの成功-失敗を判定する-log-parser"><a href="#コンソールログを元にジョブの成功-失敗を判定する-log-parser" class="header-anchor">#</a> コンソールログを元にジョブの成功/失敗を判定する[Log Parser]</h2> <p><a href="https://plugins.jenkins.io/log-parser/#documentation" target="_blank" rel="noopener noreferrer">Log Parser<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>というプラグインを使うと、指定した条件で、ジョブの実行によって出力されるコンソールログを解析してくれる。解析した結果、ジョブを成功扱いにしたり、逆に失敗扱いにすることができる。</p> <p>例えば、失敗になって欲しいジョブが何かしらの理由で成功となってしまう（サードパーティ製の処理をしており、処理結果を変えることができない…とか）場合に、出力されるコンソールログを元に、失敗にたおすことができる。</p> <h3 id="使い方"><a href="#使い方" class="header-anchor">#</a> 使い方</h3> <p><code>Log Parser</code>プラグインをインストールし、Jenkinsを再起動する。</p> <p><code>Jenkinsの管理</code> -&gt; <code>システムの設定</code> -&gt; <code>Console Output Parsing</code> で「追加」ボタンを押し、<code>Description</code>にルールの概要、<code>Parsing Rules File</code>にルールが記載されたファイルのパスを記載する。</p> <p><img src="/mywiki/assets/img/20200830004004.1256d52e.png" alt=""></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>※パスの指定がちょっとハマりどころ。どうも、相対パスだと読み取ってくれないようで、<strong>絶対パスで指定する</strong>必要がありそう。（相対パスでもできるやり方をご存知の方教えていただけると…）絶対パスで指定する場合は、Jenkinsのホームディレクトリ（例だと<code>/var/jenkins_home</code>）で指定する。ルールが記載された実ファイル自体は、Jenkinsのホームディレクトリで指定されている実際のディレクトリに配置する必要がある。今回の例だと、Jenkinsホームディレクトリの実態は<code>/home/(UserName)/jenkins</code>としているので、この配下にルールファイルを配置していく。ファイルの配置と設定が噛み合わない状態だと、ジョブ実行時に以下のようなExceptionが発生する。</p> <p><img src="data:image/png;base64,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" alt=""></p></div> <p>上記の例で指定しているファイル<code>sqlerror.txt</code>には、</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>error /error/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>としておく。これは、<strong>errorという文字が含まれていたらジョブを失敗扱いとする</strong>ルールとなる。</p> <p>設定が終わったら、「保存」もしくは「Apply」ボタンを押す。これでルールの定義自体は終わり。</p> <p>次に、ルールを設定したいジョブの設定画面を開く。<code>ビルド後の処理の追加</code>で、<code>Console output (build log) parsing</code>を選択する。すると、入力エリアが表示されるので設定を行う。</p> <ul><li><code>Mark build Failed on Error</code>をチェックON</li> <li><code>Use global rule</code>を選択し、<code>Select Parsing Rules</code>で先ほど定義したルール<code>SQL Error</code>を選択</li></ul> <p><img src="/mywiki/assets/img/20200830010014.76849dbd.png" alt=""></p> <p>以上で設定が完了。</p> <p>ジョブを実行し、コンソールログに<code>error</code>が含まれていると、ジョブが失敗扱いとなることが分かる。便利～。</p> <p><img src="/mywiki/assets/img/20200830012450.7293b2c9.png" alt=""></p> <h2 id="ユーザー-ジョブごとに権限を設定する-role-based-authorization-strategy"><a href="#ユーザー-ジョブごとに権限を設定する-role-based-authorization-strategy" class="header-anchor">#</a> ユーザー/ジョブごとに権限を設定する[Role-based Authorization Strategy]</h2> <p><a href="https://plugins.jenkins.io/role-strategy/" target="_blank" rel="noopener noreferrer">Role-based Authorization Strategy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>というプラグインを使うと、ユーザーごとやジョブごとに権限を設定することができる。例えば、ユーザーAには全てのジョブの編集・実行権限、ユーザーBには一部のジョブの実行権限だけを付与したりすることができる。</p> <h3 id="使い方-2"><a href="#使い方-2" class="header-anchor">#</a> 使い方</h3> <p><code>Role-based Authorization Strategy</code>プラグインをインストールし、Jenkinsを再起動する。</p> <p><code>Jenkinsの管理</code> -&gt; <code>グローバルセキュリティの設定</code> -&gt; <code>権限管理</code> で<code>Role-based Strategy</code>を選択し、「保存」もしくは「Apply」ボタンを押す。これによって、<code>Jenkinsの管理</code>に<code>Manage and Assign Roles</code>が表示される。</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>これをクリックすると、権限の管理メニューが表示される。</p> <p><code>Manage Roles</code>で権限自体の設定を行う。
<code>Assign Roles</code>で設定した権限をユーザーに割り当てることができる。</p> <p><img src="/mywiki/assets/img/20200831143101.ffcdaf55.png" alt=""></p> <p>まずは、<code>Manage Roles</code>をクリックし、権限自体の設定を行っていく。権限の単位として、<code>Global roles</code>、<code>Item roles</code>とある（<code>Node roles</code>は割愛）。それぞれ以下のような権限管理が可能となっている。</p> <ul><li><code>Global roles</code>は、ジョブ関係なく、Jenkins全体</li> <li><code>Item roles</code>は、<code>Pattern</code>に該当するジョブ毎</li></ul> <p>ここでは例として、「<code>kolove</code>ユーザーは<code>Test</code>で始まるジョブのみ実行権限がある」設定を行ってみる。</p> <p><code>Global roles</code>で、全体のRead権限を持つreferenceロールを追加する。<code>Role to add</code>にロール名<code>reference</code>を入力し「Add」ボタンを押すと、ロールが一覧に追加される。あとは、付与したい権限のチェックを入れればロールが付与される。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>※補足：<code>Global roles</code>で、全体のRead権限を付与しないと、そもそもJenkins自体にアクセスできないため、必ず付与する必要がある。付与していない状態だと、Jenkinsにログイン自体はできるが、「全体/Readパーミッションがありません」と表示され何も操作できない状態となってしまう。</p></div> <p><code>Item roles</code>を設定していく。<code>Role to add</code>にロール名<code>TestJob</code>、<code>Pattern</code>に<code>Test.*</code>と入力し「Add」ボタンを押すと、ロールが一覧に追加される。<code>Pattern</code>には正規表現が利用でき、この設定の場合は「Testで始まるジョブ」が対象とされる。あとは、一覧で付与したい権限のチェックを入れればロールが付与される。ここでは、ジョブの参照と実行権限を付与したいため、<code>ジョブ - Build、Cancel、Read</code>をチェックONにする。</p> <p>ここまで設定が終わったら、「Save」または「Apply」ボタンを押して保存を行う。ここまで設定した状態が下図の通り。</p> <p><img src="/mywiki/assets/img/20200831144652.68af1c57.png" alt=""></p> <p>次に、<code>Assign Roles</code>をクリックし、作成した権限をユーザーに割り当てていく。</p> <p><code>Global roles</code>の<code>User/group to add</code>にユーザー名<code>kolove</code>を入力し「Add」ボタンを押すと、ユーザーが一覧に追加される。あとは、<code>reference</code>をチェックONにすれば、先ほど作成した<code>refernece</code>権限が<code>kolove</code>に付与されたこととなる。</p> <p><code>Item roles</code>の<code>User/group to add</code>にユーザー名<code>kolove</code>を入力し「Add」ボタンを押すと、ユーザーが一覧に追加される。あとは、<code>TestJob</code>をチェックONにすれば、先ほど作成した<code>TestJob</code>権限が<code>kolove</code>に付与されたこととなる。</p> <p>ここまで設定が終わったら、「Save」または「Apply」ボタンを押して保存を行う。ここまで設定した状態が下図の通り。</p> <p><img src="/mywiki/assets/img/20200831150502.35ad84af.png" alt=""></p> <p>以上で、「<code>kolove</code>ユーザーは<code>Test</code>で始まるジョブのみ実行権限がある」権限設定ができた。該当ユーザーでログインし、閲覧できるジョブを確認する。</p> <p>※システムユーザーの場合：</p> <p><img src="/mywiki/assets/img/20200831150921.a6385cbd.png" alt=""></p> <p><img src="/mywiki/assets/img/20200831151219.0d18daf6.png" alt=""></p> <p>※<code>kolove</code>ユーザーの場合：</p> <p><img src="/mywiki/assets/img/20200831150946.2e5dffdd.png" alt=""></p> <p><img src="/mywiki/assets/img/20200831151250.c0049e36.png" alt=""></p> <h3 id="参考サイト"><a href="#参考サイト" class="header-anchor">#</a> 参考サイト</h3> <p><a href="https://blog.fenrir-inc.com/jp/2012/12/jenkins_plugins.html" target="_blank" rel="noopener noreferrer">Jenkins がもっと便利になるおすすめプラグイン 8 つ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mywiki/" class="prev router-link-active">
        Top Page
      </a></span> <span class="next"><a href="/mywiki/music/2019-11-29-01.html">
        iPhoneで録画/録音したBGMをiPhoneやスマートウォッチで再生したい
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/mywiki/assets/js/app.352ddc3a.js" defer></script><script src="/mywiki/assets/js/2.812fbf60.js" defer></script><script src="/mywiki/assets/js/4.d918e250.js" defer></script>
  </body>
</html>
